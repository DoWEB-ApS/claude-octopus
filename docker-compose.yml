name: doweb-enterprise

services:
  doweb-agent:
    profiles: ["enterprise"]
    build:
      context: .
      dockerfile: docker/enterprise-agent.Dockerfile
    image: doweb/claude-octopus-enterprise:local
    container_name: doweb-agent
    working_dir: /project
    stdin_open: true
    tty: true
    user: "0:0"
    environment:
      HOME: /root
      CLAUDE_OCTOPUS_WORKSPACE: /root/.claude-octopus
      DOWEB_PLUGIN_ROOT: /workspace
      DOWEB_ALLOW_HOST: "false"
      DOWEB_AUTO_PLUGIN_INSTALL: "true"
      OCTOPUS_CODEX_SANDBOX: danger-full-access
      OCTOPUS_GEMINI_SANDBOX: headless
    env_file:
      - path: .env.enterprise
        required: false
    volumes:
      - ./:/workspace
      - ./:/project
      - doweb-root:/root
    command: ["bash"]
    restart: "no"

volumes:
  doweb-root:
